;; Keyboard configuraion
(defcfg
    danger-enable-cmd yes ;; Enable commands
    log-layer-changes no
    sequence-input-mode visible-backspaced
)

(defsrc
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12  ins prnt del   pp   mute prev next
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc           nlck kp/  kp*  kp-
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    ret            kp7  kp8  kp9
  caps a    s    d    f    g    h    j    k    l    ;    '          \             kp4  kp5  kp6  kp+
  lsft 102d z    x    c    v    b    n    m    ,    .    /    rsft      up        kp1  kp2  kp3
  lctl lmet lalt           spc            ralt rmet rctl left down rght      kp0       kp.  kprt
)

;; Left hand home row chords
(defvar
    chord-timeout 15
)
(defalias
  kaboom (cmd bash -c "sudo killall kanata")
  r (chord main r)
  s (chord main s)
  n (chord main n)
  d (chord main d)
)

(defchords main $chord-timeout
  (r     ) r
  ( s    ) s
  (   n  ) n
  (    d ) d
  (s n   ) esc
  (s r   ) (one-shot 1000 lctl) ;; s+r=control
  (  n d ) (one-shot 1000 lalt) ;; s+r=control
)

(defalias
  a (chord mainr a)
  e (chord mainr e)
  i (chord mainr i)
  h (chord mainr h)
)

(defchords mainr $chord-timeout
  (a     ) a
  ( e    ) e
  (   i  ) i
  (    h ) h
  (e i   ) ret
  (e a   ) (one-shot 1000 lctl) ;; e+a=control
  (  i h ) (one-shot 1000 lalt) ;; e+a=control
)

;; tmp
(defseq "git status" (r s n))
(deffakekeys
  "git status" (macro g i t spc s t a t u s)
)

(defalias
  ;; 'm' on press, 'l' when rolled with 'f' (for 'fl' biagram)
  m (fork m l (f p))
)

(deflayer main
  @kaboom  XX   XX   XX   XX   XX   XX   XX   XX   XX   XX  XX  XX  XX XX XX   XX   XX XX XX
  lrld  j    XX    f    @m    p    XX    XX    XX    XX    XX    XX    XX    XX           XX XX  XX  XX
  sldr  @r    @s    @n    @d    w    XX    XX    ,    @a    @e    @i    @h    ;            XX  XX  XX
  x g    l    c    b    XX    XX    XX    XX    u    o    y          k             XX  XX  XX  XX
  XX (layer-switch qwerty) XX    XX    XX    XX    XX    XX    spc  XX XX  XX XX     XX                XX  XX  XX
  XX XX XX           XX            XX  XX XX XX XX      XX       XX XX  XX
)

;; tmp
(deflayer qwerty
  esc  f1   f2   f3   f4   f5   f6   f7   f8   f9   f10  f11  f12  ins prnt del   pp   mute prev next
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc           nlck kp/  kp*  kp-
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    ret            kp7  kp8  kp9
  caps a    s    d    f    g    h    j    k    l    ;    '          \             kp4  kp5  kp6  kp+
  lsft (layer-switch main) z    x    c    v    b    n    m    ,    .    /    rsft      up        kp1  kp2  kp3
  lctl lmet lalt           spc            ralt rmet rctl left down rght      kp0       kp.  kprt
)

